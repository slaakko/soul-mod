<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Compiling</title>
    <link href="../../style/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <h1>
        1.2.8 Compiling 
    </h1
>
    <h2>
        Generating C++ Files
    </h2>

    <p>
        C++ source code and resource files can be generated from files referenced in a lexer .slg project file by running the lexer generator 'slg':
    </p>

    <ul>
        <div class="console">
            C:\minilang>slg -v minilang.slg<br/>
            > C:/minilang/minilang.slg<br />
            generating lexers for project 'minilang.slg'...<br />
            > C:/minilang/minilang.token<br />
            ==> C:/minilang/minilang.token.cppm<br />
            > C:/minilang/minilang.keyword<br />
            > C:/minilang/minilang.expr<br />
            > C:/minilang/minilang_lexer.lexer<br />
            ==> C:/minilang/minilang.lexer.classmap<br />
            ==> C:/minilang/minilang.lexer.classmap.compressed<br />
            ==> C:/minilang/minilang.lexer.classmap.rc<br />
            ==> C:/minilang/minilang_lexer.cppm<br />
            ==> C:/minilang/minilang_lexer.cpp<br />
            lexers for project 'minilang.slg' generated successfully.<br />
        </div>
    </ul>

    <h2>
        Adding the Generated Files
    </h2>

    <p>
        To add the generated files to the project:
    </p>

    <ul>
        <li>
            Right-click your project in the Solution Explorer and select 'Add | Existing Item...'
        </li>
        <li>
            Add the following files to the project:
            <ul>
                <li><span class="mono">minilang.token.cppm</span> contains a module interface unit of a token module</li>
                <li><span class="mono">minilang_lexer.cppm</span> contains a module interface unit of a lexer module</li>
                <li><span class="mono">minilang_lexer.cpp</span> contains a module implementation unit of a lexer module</li>
                <li><span class="mono">minilang.lexer.classmap.rc</span> is a Windows resource file that embeds a compressed lexer classmap as a Windows resource.
                This will need to be added to each executable C++ project that uses this kind of lexer.
                The lexer initialization code will read and decompress the classmap for the first lexer of this kind. Subsequent lexer instances of the same kind
                will use the same classmap instance.
            </ul>
        </li>
    </ul>

    <h2>
        Adding Support for Soul
    </h2>

    <p>
        At the moment probably the easiest way to add support for Soul is to add the required Soul library projects to the solution and then add references to the required Soul libraries.
    </p>

    <ul>
        <li>
            Right-click the solution in the Solution Explorer and select 'Add | Existing Project...'
		</li>
		<li>
            Navigate to the <span class="mono">C:\soul-4.0.0\soul\ast</span> folder and add the <span class="mono">ast.vcxproj</span> to the solution.
        </li>
        <li>
            Do the same for 
			<ul>
			<li><span class="mono">C:\soul-4.0.0\soul\lexer</span>,</li>
			<li><span class="mono">C:\soul-4.0.0\soul\parser</span> and</li>
			<li><span class="mono">C:\soul-4.0.0\util</span></li>
			</ul> projects.
        </li>
        <li>Expand your project in the Solution Explorer, right-click 'References' and select 'Add Reference...'</li>
        <li>Add a reference to the 
		<ul>
			<li><span class="mono">ast</span>,</li> 
			<li><span class="mono">lexer</span>,</li>
			<li><span class="mono">parser</span> and</li>
			<li><span class="mono">util</span></li>
		</ul>
			module.</li>
    </ul>

    <h2>
        Compiling the Solution
    </h2>

    <ul>
        <li>Select the <span class="mono">64 | Debug</span> configuration.</li>
        <li>Select the <span class="mono">Build | Build Solution</span> command.</li>
        <li>The required Soul libraries and then your project should compile successfully.</li>
        <li>Select the <span class="mono">64 | Release</span> configuration</li>
        <li>Select the <span class="mono">Build | Build Solution</span> command.</li>
        <li>The required Soul libraries and then your project should compile successfully.</li>
    </ul>

</body>
</html>
